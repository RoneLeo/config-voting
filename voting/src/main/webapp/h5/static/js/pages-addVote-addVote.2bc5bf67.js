(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages-addVote-addVote"],{"0750":function(t,e,i){"use strict";i.r(e);var s=i("7e8e"),a=i.n(s);for(var n in s)"default"!==n&&function(t){i.d(e,t,function(){return s[t]})}(n);e["default"]=a.a},"28c9":function(t,e,i){"use strict";var s=i("c8d5"),a=i.n(s);a.a},3844:function(t,e,i){"use strict";var s=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("v-uni-view",{staticClass:"page"},[i("login"),i("cu-custom",{attrs:{bgColor:"bg-blue",isBack:!0}},[i("template",{attrs:{slot:"content"},slot:"content"},[t._v("发起投票活动")])],2),i("v-uni-view",{staticClass:"cu-bar justify-start bg-white margin-top"},[i("v-uni-view",{staticClass:"action border-title"},[i("v-uni-text",{staticClass:"text-xl text-bold text-blue"},[t._v("基本设置")]),i("v-uni-text",{staticClass:"bg-blue",staticStyle:{width:"3rem"}})],1)],1),i("v-uni-view",{},[i("v-uni-view",{staticClass:"cu-form-group"},[i("v-uni-view",{staticClass:"title"},[t._v("活动标题")]),i("v-uni-input",{attrs:{placeholder:"请填写活动标题",name:"input"},model:{value:t.activityForm.bt,callback:function(e){t.$set(t.activityForm,"bt",e)},expression:"activityForm.bt"}})],1),i("v-uni-view",{staticClass:"cu-form-group"},[i("v-uni-view",{staticClass:"title"},[t._v("开始日期")]),i("v-uni-picker",{attrs:{mode:"date",value:t.activityForm.kssj,start:"2015-09-01",end:"2020-09-01"},on:{change:function(e){e=t.$handleEvent(e),t.startDateChange(e)}}},[i("v-uni-view",{staticClass:"picker"},[t._v(t._s(t.activityForm.kssj))])],1)],1),i("v-uni-view",{staticClass:"cu-form-group"},[i("v-uni-view",{staticClass:"title"},[t._v("结束日期")]),i("v-uni-picker",{attrs:{mode:"date",value:t.activityForm.jssj,start:"2015-09-01",end:"2020-09-01"},on:{change:function(e){e=t.$handleEvent(e),t.endDateChange(e)}}},[i("v-uni-view",{staticClass:"picker"},[t._v(t._s(t.activityForm.jssj))])],1)],1),i("v-uni-view",{staticClass:"cu-form-group"},[i("v-uni-view",{staticClass:"title"},[t._v("活动内容")]),i("v-uni-textarea",{attrs:{maxlength:"-1",placeholder:"请输入活动内容"},model:{value:t.activityForm.nr,callback:function(e){t.$set(t.activityForm,"nr",e)},expression:"activityForm.nr"}})],1),i("v-uni-view",{staticClass:"padding"},[i("v-uni-view",{staticClass:"justify-center text-blue",staticStyle:{border:"1px dashed #ccc","border-radius":"10upx",height:"60upx",display:"flex","align-items":"center","font-size":"18px","margin-top":"20upx"},on:{click:function(e){e=t.$handleEvent(e),t.saveTheme(e)}}},[t._v("save")])],1)],1),i("v-uni-view",{staticClass:"cu-bar justify-start bg-white margin-top"},[i("v-uni-view",{staticClass:"action border-title"},[i("v-uni-text",{staticClass:"text-xl text-bold text-blue"},[t._v("投票题目")]),i("v-uni-text",{staticClass:"bg-blue",staticStyle:{width:"3rem"}})],1)],1),i("v-uni-view",{staticClass:"vote-list"},t._l(t.votelist,function(e,s){return i("v-uni-view",{staticClass:"vote-item"},[i("v-uni-view",{staticClass:"vote-item-bt"},[i("v-uni-text",{staticClass:"vote-index"},[t._v(t._s(s+1)+".")]),i("v-uni-text",{staticClass:"cu-tag radius bg-blue",staticStyle:{"margin-right":"20upx"}},[t._v(t._s(t.myJson.vote[e.tplx]))]),t._v(t._s(e.bt)),i("v-uni-text",{directives:[{name:"show",rawName:"v-show",value:1!=e.tplx,expression:"vote.tplx!=1"}]},[t._v("(可选"+t._s(e.zxs)+"-"+t._s(e.zds)+"个选项)")])],1),t._l(e.volist,function(e,a){return i("v-uni-view",{staticClass:"vote-item-opt"},[i("v-uni-text",{staticClass:"vote-index"},[t._v(t._s(s+1)+"."+t._s(a+1))]),i("v-uni-text",{directives:[{name:"show",rawName:"v-show",value:1==e.xxlx||3==e.xxlx,expression:"opt.xxlx==1 || opt.xxlx==3"}]},[t._v(t._s(e.xxmc))]),i("v-uni-view",{directives:[{name:"show",rawName:"v-show",value:2==e.xxlx,expression:"opt.xxlx==2"}]},[i("v-uni-image",{staticStyle:{width:"200upx",height:"150upx"},attrs:{src:e.xxmc,mode:""}})],1),i("v-uni-text",{directives:[{name:"show",rawName:"v-show",value:4==e.xxlx,expression:"opt.xxlx==4"}]},[t._v("其他（用户自行填写）")])],1)}),i("v-uni-view",{staticClass:"vote-item-del",on:{click:function(e){e=t.$handleEvent(e),t.deleteOne(s)}}},[i("v-uni-image",{staticStyle:{width:"45upx",height:"45upx"},attrs:{src:"../../static/img/del.png",mode:""}})],1)],2)})),i("v-uni-view",{staticClass:"padding"},[i("v-uni-view",{staticClass:"justify-center text-blue",staticStyle:{border:"1px dashed #ccc","border-radius":"10upx",height:"60upx",display:"flex","align-items":"center","font-size":"18px"},on:{click:function(e){e=t.$handleEvent(e),t.gotoVoteTitle(e)}}},[t._v("+")])],1),i("v-uni-view",{staticClass:"padding",staticStyle:{"text-align":"center"}},[i("v-uni-button",{staticClass:"cu-btn bg-blue",staticStyle:{"margin-top":"60upx"},on:{click:function(e){e=t.$handleEvent(e),t.createCode(e)}}},[t._v("提前生成二维码")])],1),i("Modal",{attrs:{modalShow:t.modalShow,modalTitle:"警告（Warning）",modalContent:t.modalContent},on:{hide:function(e){e=t.$handleEvent(e),t.hideModal(e)}}})],1)},a=[];i.d(e,"a",function(){return s}),i.d(e,"b",function(){return a})},"7e6b":function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var s={1:"文字",2:"多媒体",3:"数字",4:"其他"},a={1:"单选",2:"多选"},n={voteOpt:s,vote:a};e.default=n},"7e8e":function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var s=i("2f62"),a=n(i("7e6b"));function n(t){return t&&t.__esModule?t:{default:t}}function o(t){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{},s=Object.keys(i);"function"===typeof Object.getOwnPropertySymbols&&(s=s.concat(Object.getOwnPropertySymbols(i).filter(function(t){return Object.getOwnPropertyDescriptor(i,t).enumerable}))),s.forEach(function(e){l(t,e,i[e])})}return t}function l(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}var r={data:function(){return{paramsHdid:null,activityForm:{bt:"",nr:"",hdlx:0,sffb:0,kssj:"",jssj:""},votelist:[],startDate:"",endDate:"",modalShow:!1,modalContent:"",myJson:a.default}},computed:{hdid:{get:function(){return this.$store.state.voteData.id}}},onLoad:function(t){var e=this;this.paramsHdid=t.hdid,console.log(this.hdid,t.hdid,a.default),(t.hdid||this.hdid)&&this.$api.post("/theme/findAllInfoById",{id:t.hdid||this.hdid}).then(function(t){200==t.resCode&&(e.activityForm=t.data,e.votelist=e.activityForm.votelist||[])})},onShow:function(){var t=this;(this.paramsHdid||this.hdid)&&this.$api.post("/theme/findAllInfoById",{id:this.paramsHdid||this.hdid}).then(function(e){200==e.resCode&&(t.activityForm=e.data,t.activityForm.kssj=t.activityForm.kssj&&t.activityForm.kssj.substring(0,11),t.activityForm.jssj=t.activityForm.jssj&&t.activityForm.jssj.substring(0,11),t.votelist=t.activityForm.votelist||[])})},mounted:function(){},methods:o({},(0,s.mapMutations)(["saveVoteData","resetVoteData"]),{createCode:function(){console.log(this.paramsHdid||this.activityForm.id),uni.navigateTo({url:"../../pages/code/code?lx=mark&id="+(this.paramsHdid||this.activityForm.id)+"&title="+this.activityForm.bt+"&kssj="+this.activityForm.kssj+"&jssj="+this.activityForm.jssj})},deleteOne:function(t){console.log(this.votelist[t])},hideModal:function(){this.modalShow=!1},saveTheme:function(){var t=this;for(var e in console.log(JSON.parse(JSON.stringify(this.activityForm))),this.activityForm)"scorelist"!=e&&"scoreoblist"!=e&&(""!==this.activityForm[e]&&null!==this.activityForm[e]||(console.log(e),this.modalShow=!0,this.modalContent="请完成所有设置选项。"));var i=this.activityForm.id?"/theme/update":"/theme/add";this.$api.post(i,Object.assign({},this.activityForm)).then(function(e){200==e.resCode?(t.saveVoteData(e.data.id),uni.showToast({title:"保存成功",icon:"none"})):uni.showToast({title:e.resMsg,icon:"none"}),console.log(e)})},gotoVoteTitle:function(){this.paramsHdid&&this.saveVoteData(this.paramsHdid),"[object Null]"==Object.prototype.toString.call(this.hdid)?(this.modalShow=!0,this.modalContent="需要先完成活动及基本设置，并成功保存后，才能对其添加题目哦。"):uni.navigateTo({url:"../../pages/addVoteTitle/addVoteTitle"})},startDateChange:function(t){this.activityForm.kssj=t.detail.value},endDateChange:function(t){this.activityForm.jssj=t.detail.value}})};e.default=r},8313:function(t,e,i){e=t.exports=i("2350")(!1),e.push([t.i,'@charset "UTF-8";\n/**\r\n * 这里是uni-app内置的常用样式变量\r\n *\r\n * uni-app 官方扩展插件及插件市场（https://ext.dcloud.net.cn）上很多三方插件均使用了这些样式变量\r\n * 如果你是插件开发者，建议你使用scss预处理，并在插件代码中直接使用这些变量（无需 import 这个文件），方便用户通过搭积木的方式开发整体风格一致的App\r\n *\r\n */\n/**\r\n * 如果你是App开发者（插件使用者），你可以通过修改这些变量来定制自己的插件主题，实现自定义主题功能\r\n *\r\n * 如果你的项目同样使用了scss预处理，你也可以直接在你的 scss 代码中使用如下变量，同时无需 import 这个文件\r\n */\n/* 颜色变量 */\n/* 行为相关颜色 */\n/* 文字基本颜色 */\n/* 背景颜色 */\n/* 边框颜色 */\n/* 尺寸变量 */\n/* 文字尺寸 */\n/* 图片尺寸 */\n/* Border Radius */\n/* 水平间距 */\n/* 垂直间距 */\n/* 透明度 */\n/* 文章场景相关 */.cu-form-group .title[data-v-1e49bfe7]{min-width:calc(4em + 15px)}.vote-list[data-v-1e49bfe7]{padding:%?20?% %?30?%}.vote-list .vote-item[data-v-1e49bfe7]{margin-bottom:%?20?%;border:1px solid #dedede;border-radius:%?10?%;padding:%?20?%;color:#999;font-size:14px;position:relative}.vote-list .vote-item .vote-index[data-v-1e49bfe7]{display:inline-block;width:%?60?%;text-align:center}.vote-list .vote-item .vote-index[data-v-1e49bfe7],.vote-list .vote-item .vote-item-bt[data-v-1e49bfe7]{color:#555}.vote-list .vote-item .vote-item-bt[data-v-1e49bfe7],.vote-list .vote-item .vote-item-opt[data-v-1e49bfe7]{line-height:2}.vote-list .vote-item .vote-item-opt[data-v-1e49bfe7]{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-align:start;-webkit-align-items:flex-start;-ms-flex-align:start;align-items:flex-start}',""])},a59c:function(t,e,i){"use strict";i.r(e);var s=i("3844"),a=i("0750");for(var n in a)"default"!==n&&function(t){i.d(e,t,function(){return a[t]})}(n);i("28c9");var o=i("2877"),l=Object(o["a"])(a["default"],s["a"],s["b"],!1,null,"1e49bfe7",null);e["default"]=l.exports},c8d5:function(t,e,i){var s=i("8313");"string"===typeof s&&(s=[[t.i,s,""]]),s.locals&&(t.exports=s.locals);var a=i("4f06").default;a("513a0491",s,!0,{sourceMap:!1,shadowMode:!1})}}]);