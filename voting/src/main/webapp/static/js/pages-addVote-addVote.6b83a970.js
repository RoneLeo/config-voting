(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages-addVote-addVote"],{"0750":function(t,i,e){"use strict";e.r(i);var s=e("7e8e"),a=e.n(s);for(var n in s)"default"!==n&&function(t){e.d(i,t,function(){return s[t]})}(n);i["default"]=a.a},"56b3":function(t,i,e){"use strict";var s=function(){var t=this,i=t.$createElement,e=t._self._c||i;return e("v-uni-view",{staticClass:"page"},[e("login"),e("cu-custom",{attrs:{bgColor:"bg-blue",isBack:!0}},[e("template",{attrs:{slot:"content"},slot:"content"},[t._v("发起投票活动")])],2),e("v-uni-view",{staticClass:"cu-bar justify-start bg-white margin-top"},[e("v-uni-view",{staticClass:"action border-title"},[e("v-uni-text",{staticClass:"text-xl text-bold text-blue"},[t._v("基本设置")]),e("v-uni-text",{staticClass:"bg-blue",staticStyle:{width:"3rem"}})],1)],1),e("v-uni-view",{},[e("v-uni-view",{staticClass:"cu-form-group"},[e("v-uni-view",{staticClass:"title"},[t._v("活动标题")]),e("v-uni-input",{attrs:{placeholder:"请填写活动标题",name:"input"},model:{value:t.activityForm.bt,callback:function(i){t.$set(t.activityForm,"bt",i)},expression:"activityForm.bt"}})],1),e("v-uni-view",{staticClass:"cu-form-group"},[e("v-uni-view",{staticClass:"title"},[t._v("开始日期")]),e("v-uni-picker",{attrs:{mode:"date",value:t.activityForm.kssj,start:"2015-09-01",end:"2020-09-01"},on:{change:function(i){i=t.$handleEvent(i),t.startDateChange(i)}}},[e("v-uni-view",{staticClass:"picker"},[t._v(t._s(t.activityForm.kssj))])],1)],1),e("v-uni-view",{staticClass:"cu-form-group"},[e("v-uni-view",{staticClass:"title"},[t._v("结束日期")]),e("v-uni-picker",{attrs:{mode:"date",value:t.activityForm.jssj,start:"2015-09-01",end:"2020-09-01"},on:{change:function(i){i=t.$handleEvent(i),t.endDateChange(i)}}},[e("v-uni-view",{staticClass:"picker"},[t._v(t._s(t.activityForm.jssj))])],1)],1),e("v-uni-view",{staticClass:"cu-form-group"},[e("v-uni-view",{staticClass:"title"},[t._v("活动内容")]),e("v-uni-textarea",{attrs:{maxlength:"-1",placeholder:"请输入活动内容"},model:{value:t.activityForm.nr,callback:function(i){t.$set(t.activityForm,"nr",i)},expression:"activityForm.nr"}})],1),e("v-uni-view",{staticClass:"padding"},[e("v-uni-view",{staticClass:"justify-center text-blue",staticStyle:{border:"1px dashed #ccc","border-radius":"10upx",height:"60upx",display:"flex","align-items":"center","font-size":"18px","margin-top":"20upx"},on:{click:function(i){i=t.$handleEvent(i),t.saveTheme(i)}}},[t._v("save")])],1)],1),e("v-uni-view",{staticClass:"cu-bar justify-start bg-white margin-top"},[e("v-uni-view",{staticClass:"action border-title"},[e("v-uni-text",{staticClass:"text-xl text-bold text-blue"},[t._v("投票题目")]),e("v-uni-text",{staticClass:"bg-blue",staticStyle:{width:"3rem"}})],1)],1),e("v-uni-view",{staticClass:"vote-list"},t._l(t.votelist,function(i,s){return e("v-uni-view",{staticClass:"vote-item"},[e("v-uni-view",{staticClass:"vote-item-bt"},[e("v-uni-text",{staticClass:"vote-index"},[t._v(t._s(s+1)+".")]),e("v-uni-text",{staticClass:"cu-tag radius bg-blue",staticStyle:{"margin-right":"20upx"}},[t._v(t._s(t.myJson.vote[i.tplx]))]),t._v(t._s(i.bt)),e("v-uni-text",{directives:[{name:"show",rawName:"v-show",value:1!=i.tplx,expression:"vote.tplx!=1"}]},[t._v("(可选"+t._s(i.zxs)+"-"+t._s(i.zds)+"个选项)")])],1),t._l(i.volist,function(i,a){return e("v-uni-view",{staticClass:"vote-item-opt"},[e("v-uni-text",{staticClass:"vote-index"},[t._v(t._s(s+1)+"."+t._s(a+1))]),e("v-uni-text",{directives:[{name:"show",rawName:"v-show",value:1==i.xxlx||3==i.xxlx,expression:"opt.xxlx==1 || opt.xxlx==3"}]},[t._v(t._s(i.xxmc))]),e("v-uni-view",{directives:[{name:"show",rawName:"v-show",value:2==i.xxlx,expression:"opt.xxlx==2"}],staticStyle:{padding:"10upx"}},[e("v-uni-image",{staticStyle:{width:"200upx",height:"150upx"},attrs:{src:i.xxmc,mode:""}})],1),e("v-uni-text",{directives:[{name:"show",rawName:"v-show",value:4==i.xxlx,expression:"opt.xxlx==4"}]},[t._v("其他（用户自行填写）")])],1)}),e("v-uni-view",{staticClass:"vote-item-del",on:{click:function(i){i=t.$handleEvent(i),t.deleteOne(s)}}},[e("v-uni-image",{staticStyle:{width:"45upx",height:"45upx"},attrs:{src:"../../static/img/del.png",mode:""}})],1)],2)})),e("v-uni-view",{staticClass:"padding"},[e("v-uni-view",{staticClass:"justify-center text-blue",staticStyle:{border:"1px dashed #ccc","border-radius":"10upx",height:"60upx",display:"flex","align-items":"center","font-size":"18px"},on:{click:function(i){i=t.$handleEvent(i),t.gotoVoteTitle(i)}}},[t._v("+")])],1),e("v-uni-view",{staticClass:"padding",staticStyle:{"text-align":"center"}},[e("v-uni-button",{staticClass:"cu-btn bg-blue",staticStyle:{"margin-top":"60upx"},on:{click:function(i){i=t.$handleEvent(i),t.createCode(i)}}},[t._v("提前生成二维码")])],1),e("Modal",{attrs:{modalShow:t.modalShow,modalTitle:"警告（Warning）",modalContent:t.modalContent},on:{hide:function(i){i=t.$handleEvent(i),t.hideModal(i)}}})],1)},a=[];e.d(i,"a",function(){return s}),e.d(i,"b",function(){return a})},6358:function(t,i,e){"use strict";var s=e("b9db"),a=e.n(s);a.a},"7e6b":function(t,i,e){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0;var s={1:"文字",2:"多媒体",3:"数字",4:"其他"},a={1:"单选",2:"多选"},n={voteOpt:s,vote:a};i.default=n},"7e8e":function(t,i,e){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0;var s=e("2f62"),a=n(e("7e6b"));function n(t){return t&&t.__esModule?t:{default:t}}function o(t){for(var i=1;i<arguments.length;i++){var e=null!=arguments[i]?arguments[i]:{},s=Object.keys(e);"function"===typeof Object.getOwnPropertySymbols&&(s=s.concat(Object.getOwnPropertySymbols(e).filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.forEach(function(i){l(t,i,e[i])})}return t}function l(t,i,e){return i in t?Object.defineProperty(t,i,{value:e,enumerable:!0,configurable:!0,writable:!0}):t[i]=e,t}var c={data:function(){return{paramsHdid:null,activityForm:{bt:"",nr:"",hdlx:0,sffb:0,kssj:"",jssj:""},votelist:[],startDate:"",endDate:"",modalShow:!1,modalContent:"",myJson:a.default}},computed:{hdid:{get:function(){return this.$store.state.voteData.id}}},onLoad:function(t){var i=this;this.paramsHdid=t.hdid,console.log(this.hdid,t.hdid,a.default),(t.hdid||this.hdid)&&this.$api.post("/theme/findAllInfoById",{id:t.hdid||this.hdid}).then(function(t){200==t.resCode&&(i.activityForm=t.data,i.votelist=i.activityForm.votelist||[])})},onShow:function(){var t=this;(this.paramsHdid||this.hdid)&&this.$api.post("/theme/findAllInfoById",{id:this.paramsHdid||this.hdid}).then(function(i){200==i.resCode&&(t.activityForm=i.data,t.activityForm.kssj=t.activityForm.kssj&&t.activityForm.kssj.substring(0,11),t.activityForm.jssj=t.activityForm.jssj&&t.activityForm.jssj.substring(0,11),t.votelist=t.activityForm.votelist||[])})},mounted:function(){},methods:o({},(0,s.mapMutations)(["saveVoteData","resetVoteData"]),{createCode:function(){console.log(this.paramsHdid||this.activityForm.id),uni.navigateTo({url:"../../pages/code/code?lx=mark&id="+(this.paramsHdid||this.activityForm.id)+"&title="+this.activityForm.bt+"&kssj="+this.activityForm.kssj+"&jssj="+this.activityForm.jssj})},deleteOne:function(t){var i=this;uni.showModal({title:"提示",content:"此操作将永久删除本题目, 是否继续?？",success:function(e){if(e.confirm){var s=JSON.parse(JSON.stringify(i.votelist[t]));delete s.volist,i.$api.post("/voting/deleteOne",s).then(function(t){200==t.resCode?uni.showToast({title:"删除成功！",icon:"none"}):uni.showToast({title:"删除失败！",icon:"none"})})}else e.cancel&&console.log("用户点击取消")}}),console.log(this.votelist[t])},hideModal:function(){this.modalShow=!1},saveTheme:function(){var t=this;console.log(JSON.parse(JSON.stringify(this.activityForm)));var i={bt:this.activityForm.bt,nr:this.activityForm.nr,hdlx:this.activityForm.hdlx,sffb:this.activityForm.sffb,kssj:this.activityForm.kssj,jssj:this.activityForm.jssj};for(var e in i)"nr"!=e&&(""!==i[e]&&null!==i[e]||(this.modalContent="请完成所有设置选项。"));var s="/theme/add";this.activityForm.id&&(s="/theme/update",i.id=this.activityForm.id),this.$api.post(s,Object.assign({},i)).then(function(i){200==i.resCode?(t.saveVoteData(i.data.id),uni.showToast({title:"保存成功",icon:"none"})):uni.showToast({title:i.resMsg,icon:"none"}),console.log(i)})},gotoVoteTitle:function(){this.paramsHdid&&this.saveVoteData(this.paramsHdid),"[object Null]"==Object.prototype.toString.call(this.hdid)?(this.modalShow=!0,this.modalContent="需要先完成活动及基本设置，并成功保存后，才能对其添加题目哦。"):uni.navigateTo({url:"../../pages/addVoteTitle/addVoteTitle"})},startDateChange:function(t){this.activityForm.kssj=t.detail.value},endDateChange:function(t){this.activityForm.jssj=t.detail.value}})};i.default=c},a59c:function(t,i,e){"use strict";e.r(i);var s=e("56b3"),a=e("0750");for(var n in a)"default"!==n&&function(t){e.d(i,t,function(){return a[t]})}(n);e("6358");var o=e("2877"),l=Object(o["a"])(a["default"],s["a"],s["b"],!1,null,"c35431ca",null);i["default"]=l.exports},b28e:function(t,i,e){i=t.exports=e("2350")(!1),i.push([t.i,'@charset "UTF-8";\n/**\r\n * 这里是uni-app内置的常用样式变量\r\n *\r\n * uni-app 官方扩展插件及插件市场（https://ext.dcloud.net.cn）上很多三方插件均使用了这些样式变量\r\n * 如果你是插件开发者，建议你使用scss预处理，并在插件代码中直接使用这些变量（无需 import 这个文件），方便用户通过搭积木的方式开发整体风格一致的App\r\n *\r\n */\n/**\r\n * 如果你是App开发者（插件使用者），你可以通过修改这些变量来定制自己的插件主题，实现自定义主题功能\r\n *\r\n * 如果你的项目同样使用了scss预处理，你也可以直接在你的 scss 代码中使用如下变量，同时无需 import 这个文件\r\n */\n/* 颜色变量 */\n/* 行为相关颜色 */\n/* 文字基本颜色 */\n/* 背景颜色 */\n/* 边框颜色 */\n/* 尺寸变量 */\n/* 文字尺寸 */\n/* 图片尺寸 */\n/* Border Radius */\n/* 水平间距 */\n/* 垂直间距 */\n/* 透明度 */\n/* 文章场景相关 */.cu-form-group .title[data-v-c35431ca]{min-width:calc(4em + 15px)}.vote-list[data-v-c35431ca]{padding:%?20?% %?30?%}.vote-list .vote-item[data-v-c35431ca]{margin-bottom:%?20?%;border:1px solid #dedede;border-radius:%?10?%;padding:%?40?% %?30?% %?30?%;color:#999;font-size:14px;position:relative}.vote-list .vote-item .vote-index[data-v-c35431ca]{display:inline-block;width:%?60?%;text-align:left}.vote-list .vote-item .vote-index[data-v-c35431ca],.vote-list .vote-item .vote-item-bt[data-v-c35431ca]{color:#555}.vote-list .vote-item .vote-item-bt[data-v-c35431ca],.vote-list .vote-item .vote-item-opt[data-v-c35431ca]{line-height:2.1}.vote-list .vote-item .vote-item-opt[data-v-c35431ca]{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-align:start;-webkit-align-items:flex-start;-ms-flex-align:start;align-items:flex-start}',""])},b9db:function(t,i,e){var s=e("b28e");"string"===typeof s&&(s=[[t.i,s,""]]),s.locals&&(t.exports=s.locals);var a=e("4f06").default;a("e7cbfed6",s,!0,{sourceMap:!1,shadowMode:!1})}}]);