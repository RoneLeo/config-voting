(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages-addVoteTitle-addVoteTitle"],{"0eff":function(t,e,i){"use strict";i.r(e);var a=i("9df0"),n=i("a1cf");for(var s in n)"default"!==s&&function(t){i.d(e,t,function(){return n[t]})}(s);i("c929");var o=i("2877"),l=Object(o["a"])(n["default"],a["a"],a["b"],!1,null,"82bea82c",null);e["default"]=l.exports},"2b8a":function(t,e,i){var a=i("d787");"string"===typeof a&&(a=[[t.i,a,""]]),a.locals&&(t.exports=a.locals);var n=i("4f06").default;n("32a498ad",a,!0,{sourceMap:!1,shadowMode:!1})},"9df0":function(t,e,i){"use strict";var a=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("v-uni-view",{staticClass:"page"},[i("login"),i("cu-custom",{attrs:{bgColor:"bg-blue",isBack:!0}},[i("template",{attrs:{slot:"content"},slot:"content"},[t._v("新增/编辑投票题目")])],2),i("v-uni-view",{},[i("v-uni-view",{staticClass:"cu-bar bg-white"},[i("v-uni-view",{staticClass:"action"},[i("v-uni-text",{staticClass:"cuIcon-titles text-blue"}),i("v-uni-text",{staticClass:"text-xl text-bold"},[t._v("题目信息")])],1)],1),i("v-uni-view",{staticClass:"cu-form-group"},[i("v-uni-view",{staticClass:"title"},[t._v("题目名称")]),i("v-uni-textarea",{attrs:{maxlength:"-1",placeholder:"请输入题目名称"},model:{value:t.formData.bt,callback:function(e){t.$set(t.formData,"bt",e)},expression:"formData.bt"}})],1),i("v-uni-view",{staticClass:"cu-form-group"},[i("v-uni-view",{staticClass:"title"},[t._v("题目类型")]),i("v-uni-radio-group",{on:{change:function(e){e=t.$handleEvent(e),t.radioChange(e)}}},t._l(t.items,function(e,a){return i("v-uni-label",{key:e.value,staticStyle:{display:"block","padding-top":"10upx"}},[i("v-uni-radio",{staticStyle:{"margin-right":"10upx"},attrs:{value:e.value,checked:e.value===t.formData.tplx}}),i("v-uni-view",{staticStyle:{display:"inline-block"}},[t._v(t._s(e.name))])],1)}))],1),i("v-uni-view",{directives:[{name:"show",rawName:"v-show",value:t.numShow,expression:"numShow"}],staticClass:"cu-form-group"},[i("v-uni-view",{staticClass:"title"},[t._v("选项数")]),i("v-uni-view",{staticClass:"num-flex"},[i("v-uni-view",{staticClass:"input-wrapper"},[i("v-uni-input",{attrs:{type:"number"},model:{value:t.formData.zxs,callback:function(e){t.$set(t.formData,"zxs",e)},expression:"formData.zxs"}})],1),i("v-uni-text",{staticClass:"num-text"},[t._v("-")]),i("v-uni-view",{staticClass:"input-wrapper"},[i("v-uni-input",{attrs:{type:"number"},model:{value:t.formData.zds,callback:function(e){t.$set(t.formData,"zds",e)},expression:"formData.zds"}})],1)],1)],1)],1),i("v-uni-view",{staticStyle:{"margin-top":"50upx"}},[i("v-uni-view",{staticClass:"cu-bar bg-white"},[i("v-uni-view",{staticClass:"action"},[i("v-uni-text",{staticClass:"cuIcon-titles text-blue"}),i("v-uni-text",{staticClass:"text-xl text-bold"},[t._v("选项信息")])],1)],1),t._l(t.newOptions,function(e,a){return i("v-uni-view",{key:a,staticClass:"cu-card shadow",staticStyle:{border:"1px solid #ededed","border-radius":"20upx",margin:"10upx 20upx",padding:"10upx 10upx 20upx"}},[i("v-uni-view",{staticClass:"cu-form-group"},[i("v-uni-view",{staticClass:"title"},[t._v("选项格式")]),i("v-uni-radio-group",{ref:"radio"+a,refInFor:!0,on:{change:function(e){e=t.$handleEvent(e),t.optionsRadioChange(a)}},model:{value:e.xxlx,callback:function(i){t.$set(e,"xxlx",i)},expression:"option.xxlx"}},t._l(t.optionsRadios,function(a,n){return i("v-uni-label",{key:a.value,staticStyle:{display:"block","padding-top":"10upx"}},[i("v-uni-radio",{staticStyle:{"margin-right":"10upx"},attrs:{value:a.value,checked:e.xxlx===a.value}}),i("v-uni-view",{staticStyle:{display:"inline-block"}},[t._v(t._s(a.name))])],1)}))],1),i("v-uni-view",{directives:[{name:"show",rawName:"v-show",value:"1"==e.xxlx||"3"==e.xxlx,expression:"option.xxlx=='1' || option.xxlx=='3'"}],staticClass:"cu-form-group"},[i("v-uni-view",{staticClass:"title"},[t._v("选项名称")]),i("v-uni-input",{attrs:{placeholder:"请填写选项名称",name:"input"},model:{value:e.xxmc,callback:function(i){t.$set(e,"xxmc",i)},expression:"option.xxmc"}})],1),i("v-uni-view",{directives:[{name:"show",rawName:"v-show",value:"2"==e.xxlx&&""!=e.xxmc,expression:"option.xxlx=='2' && option.xxmc != ''"}],staticClass:"cu-form-group"},[i("v-uni-view",{staticClass:"title"},[t._v("选项图片")]),i("v-uni-image",{staticStyle:{width:"300upx",height:"200upx"},attrs:{src:e.xxmc,mode:"aspectFit"}})],1),i("v-uni-view",{staticClass:"cu-form-group"},[i("v-uni-view",{staticClass:"title"},[t._v("选项描述")]),i("v-uni-textarea",{attrs:{maxlength:"-1",placeholder:"可不填"},model:{value:e.xxnr,callback:function(i){t.$set(e,"xxnr",i)},expression:"option.xxnr"}})],1),i("v-uni-view",{staticStyle:{display:"flex","justify-content":"flex-end"}},[i("v-uni-button",{directives:[{name:"show",rawName:"v-show",value:"2"==e.xxlx&&""==e.xxmc,expression:"option.xxlx=='2' && option.xxmc == ''"}],staticClass:"cu-btn bg-blue",staticStyle:{"margin-left":"30upx"},on:{click:function(e){e=t.$handleEvent(e),t.chooseImage(a)}}},[i("v-uni-image",{staticStyle:{width:"50upx",height:"50upx"},attrs:{src:"../../static/img/upload2.png",mode:""}})],1)],1)],1)}),i("v-uni-view",{staticClass:"padding"},[i("v-uni-view",{staticClass:"justify-center text-blue",staticStyle:{border:"1px dashed #ccc","border-radius":"10upx",height:"60upx",display:"flex","align-items":"center","font-size":"18px"},on:{click:function(e){e=t.$handleEvent(e),t.addOption(e)}}},[t._v("+")]),i("v-uni-view",{staticClass:"justify-center text-blue",staticStyle:{border:"1px dashed #ccc","border-radius":"10upx",height:"60upx",display:"flex","align-items":"center","font-size":"18px","margin-top":"20upx"},on:{click:function(e){e=t.$handleEvent(e),t.saveAll(e)}}},[t._v("save")])],1),i("v-uni-view",{staticClass:"cu-modal",class:t.modalShow2?"show":""},[i("v-uni-view",{staticClass:"cu-dialog"},[i("v-uni-view",{staticClass:"cu-bar bg-white justify-end"},[i("v-uni-view",{staticClass:"content"},[t._v("消息")]),i("v-uni-view",{staticClass:"action",on:{click:function(e){e=t.$handleEvent(e),t.modalHide2(e)}}},[i("v-uni-text",{staticClass:"cuIcon-close text-red"})],1)],1),i("v-uni-view",{staticClass:"padding-xl"},[t._v("是否需要设置其他选项？"),i("v-uni-switch",{on:{change:function(e){e=t.$handleEvent(e),t.switchChange(e)}}}),i("v-uni-view",{directives:[{name:"show",rawName:"v-show",value:t.errorShow,expression:"errorShow"}],staticStyle:{color:"red","line-height":"2"}},[t._v("请完成所有设置选项。")])],1),i("v-uni-view",{staticClass:"cu-bar bg-white justify-end"},[i("v-uni-view",{staticClass:"action"},[i("v-uni-button",{staticClass:"cu-btn line-blue text-blue",on:{click:function(e){e=t.$handleEvent(e),t.modalHide2(e)}}},[t._v("取消")]),i("v-uni-button",{staticClass:"cu-btn bg-blue margin-left",on:{click:function(e){e=t.$handleEvent(e),t.saveData(e)}}},[t._v("确定")])],1)],1)],1)],1)],2)],1)},n=[];i.d(e,"a",function(){return a}),i.d(e,"b",function(){return n})},a1cf:function(t,e,i){"use strict";i.r(e);var a=i("ec76"),n=i.n(a);for(var s in a)"default"!==s&&function(t){i.d(e,t,function(){return a[t]})}(s);e["default"]=n.a},c929:function(t,e,i){"use strict";var a=i("2b8a"),n=i.n(a);n.a},d787:function(t,e,i){e=t.exports=i("2350")(!1),e.push([t.i,'@charset "UTF-8";\n/**\r\n * 这里是uni-app内置的常用样式变量\r\n *\r\n * uni-app 官方扩展插件及插件市场（https://ext.dcloud.net.cn）上很多三方插件均使用了这些样式变量\r\n * 如果你是插件开发者，建议你使用scss预处理，并在插件代码中直接使用这些变量（无需 import 这个文件），方便用户通过搭积木的方式开发整体风格一致的App\r\n *\r\n */\n/**\r\n * 如果你是App开发者（插件使用者），你可以通过修改这些变量来定制自己的插件主题，实现自定义主题功能\r\n *\r\n * 如果你的项目同样使用了scss预处理，你也可以直接在你的 scss 代码中使用如下变量，同时无需 import 这个文件\r\n */\n/* 颜色变量 */\n/* 行为相关颜色 */\n/* 文字基本颜色 */\n/* 背景颜色 */\n/* 边框颜色 */\n/* 尺寸变量 */\n/* 文字尺寸 */\n/* 图片尺寸 */\n/* Border Radius */\n/* 水平间距 */\n/* 垂直间距 */\n/* 透明度 */\n/* 文章场景相关 */.cu-form-group uni-textarea[data-v-82bea82c]{margin:0}.cu-form-group .title[data-v-82bea82c]{width:%?150?%}.num-flex[data-v-82bea82c]{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-pack:start;-webkit-justify-content:flex-start;-ms-flex-pack:start;justify-content:flex-start;color:#666}.num-flex .input-wrapper[data-v-82bea82c]{border:1px solid #e3e3e3;border-radius:%?10?%}.num-flex .input-wrapper uni-input[data-v-82bea82c]{width:%?180?%;text-align:center}.num-flex .num-text[data-v-82bea82c]{width:%?50?%;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;-webkit-box-align:center;-webkit-align-items:center;-ms-flex-align:center;align-items:center}',""])},ec76:function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var a={data:function(){return{items:[{value:"1",name:"单选（只能选择一个）"},{value:"2",name:"多选（设置选择多个）"}],optionsRadios:[{value:"1",name:"文字",checked:"true"},{value:"2",name:"多媒体(图片、动画)"},{value:"3",name:"数字"}],newOptions:[],newOption:{xxlx:"1",xxmc:"",xxnr:""},formData:{tplx:"1",bt:"",hdid:null,zxs:"1",zds:"1",qt:0},numShow:!1,errorShow:!1,modalShow2:!1}},created:function(){console.log(this.$store.state.voteData.id)},methods:{switchChange:function(t){this.formData.qt=t.target.value?1:0,console.log("switch2 发生 change 事件，携带值为",t.target.value)},modalHide2:function(){this.errorShow=!1,this.modalShow2=!1},saveData:function(){var t=this;for(var e in this.formData.hdid=this.$store.state.voteData.id||11,console.log(this.formData,this.newOptions),this.formData)""!==this.formData[e]&&null!==this.formData[e]||(this.errorShow=!0);for(var i=this.newOptions.length;i>=0;i--)for(var a in this.newOptions[i])"xxnr"==a||""!==this.newOptions[i][a]&&null!==this.newOptions[i][a]||(this.errorShow=!0);this.errorShow||(this.formData.list=JSON.stringify(this.newOptions),this.$api.post("/voting/addOneVoting",this.formData).then(function(e){console.log(e),t.modalHide2(),200==e.resCode?(uni.showToast({title:"保存成功！",icon:"none"}),uni.navigateBack()):uni.showToast({title:e.resMsg,icon:"none"})}))},saveAll:function(){this.modalShow2=!0},chooseImage:function(t){var e=this;uni.chooseImage({count:1,sizeType:["original","compressed"],sourceType:["album"],success:function(i){console.log(i);var a=i.tempFilePaths;a.length&&uni.uploadFile({url:e.$url+"/files/uploadOne",filePath:a[0],name:"file",success:function(i){console.log(i.data);var a=JSON.parse(i.data);e.newOptions[t].xxmc=e.$url+"/files/"+a.data}})},fail:function(){uni.showToast({title:"未选择到图片",icon:"none"})}})},addOption:function(){var t=[{xxlx:"1",xxmc:"",xxnr:""}];this.newOptions.concat(t);this.newOptions=this.newOptions.concat(t)},optionsRadioChange:function(t){var e=this,i="radio"+t,a=this.$refs[i][0].radioList.length&&this.$refs[i][0].radioList;a.forEach(function(i){i.radioChecked&&(e.newOptions[t].xxlx=i.radioValue,e.newOptions[t].xxmc="",e.newOptions[t].xxnr="")})},radioChange:function(t){this.formData.tplx=t.target.value,2==t.target.value?this.numShow=!0:(this.numShow=!1,this.formData.zxs="1",this.formData.zds="1")}}};e.default=a}}]);