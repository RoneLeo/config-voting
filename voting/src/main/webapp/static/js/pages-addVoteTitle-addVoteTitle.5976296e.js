(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages-addVoteTitle-addVoteTitle"],{"0eff":function(t,i,e){"use strict";e.r(i);var n=e("d3ca"),a=e("a1cf");for(var s in a)"default"!==s&&function(t){e.d(i,t,function(){return a[t]})}(s);e("5450");var o=e("2877"),l=Object(o["a"])(a["default"],n["a"],n["b"],!1,null,"4bd193ba",null);i["default"]=l.exports},5450:function(t,i,e){"use strict";var n=e("bc98"),a=e.n(n);a.a},a1cf:function(t,i,e){"use strict";e.r(i);var n=e("ec76"),a=e.n(n);for(var s in n)"default"!==s&&function(t){e.d(i,t,function(){return n[t]})}(s);i["default"]=a.a},b532:function(t,i,e){i=t.exports=e("2350")(!1),i.push([t.i,'@charset "UTF-8";\n/**\r\n * 这里是uni-app内置的常用样式变量\r\n *\r\n * uni-app 官方扩展插件及插件市场（https://ext.dcloud.net.cn）上很多三方插件均使用了这些样式变量\r\n * 如果你是插件开发者，建议你使用scss预处理，并在插件代码中直接使用这些变量（无需 import 这个文件），方便用户通过搭积木的方式开发整体风格一致的App\r\n *\r\n */\n/**\r\n * 如果你是App开发者（插件使用者），你可以通过修改这些变量来定制自己的插件主题，实现自定义主题功能\r\n *\r\n * 如果你的项目同样使用了scss预处理，你也可以直接在你的 scss 代码中使用如下变量，同时无需 import 这个文件\r\n */\n/* 颜色变量 */\n/* 行为相关颜色 */\n/* 文字基本颜色 */\n/* 背景颜色 */\n/* 边框颜色 */\n/* 尺寸变量 */\n/* 文字尺寸 */\n/* 图片尺寸 */\n/* Border Radius */\n/* 水平间距 */\n/* 垂直间距 */\n/* 透明度 */\n/* 文章场景相关 */.cu-form-group uni-textarea[data-v-4bd193ba]{margin:0}.cu-form-group .title[data-v-4bd193ba]{width:%?150?%}.num-flex[data-v-4bd193ba]{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-pack:start;-webkit-justify-content:flex-start;-ms-flex-pack:start;justify-content:flex-start;color:#666}.num-flex .input-wrapper[data-v-4bd193ba]{border:1px solid #e3e3e3;border-radius:%?10?%}.num-flex .input-wrapper uni-input[data-v-4bd193ba]{width:%?180?%;text-align:center}.num-flex .num-text[data-v-4bd193ba]{width:%?50?%;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;-webkit-box-align:center;-webkit-align-items:center;-ms-flex-align:center;align-items:center}',""])},bc98:function(t,i,e){var n=e("b532");"string"===typeof n&&(n=[[t.i,n,""]]),n.locals&&(t.exports=n.locals);var a=e("4f06").default;a("5491345e",n,!0,{sourceMap:!1,shadowMode:!1})},d3ca:function(t,i,e){"use strict";var n=function(){var t=this,i=t.$createElement,e=t._self._c||i;return e("v-uni-view",{staticClass:"page"},[e("login",{attrs:{loginFormShow:t.loginFormShow},on:{hide:function(i){i=t.$handleEvent(i),t.loginHide(i)}}}),e("cu-custom",{attrs:{bgColor:"bg-blue",isBack:!0}},[e("template",{attrs:{slot:"content"},slot:"content"},[t._v("新增/编辑投票题目")])],2),e("v-uni-view",{},[e("v-uni-view",{staticClass:"cu-bar bg-white"},[e("v-uni-view",{staticClass:"action"},[e("v-uni-text",{staticClass:"cuIcon-titles text-blue"}),e("v-uni-text",{staticClass:"text-xl text-bold"},[t._v("题目信息")])],1)],1),e("v-uni-view",{staticClass:"cu-form-group"},[e("v-uni-view",{staticClass:"title"},[t._v("题目名称")]),e("v-uni-textarea",{attrs:{maxlength:"-1",placeholder:"请输入题目名称"},model:{value:t.formData.bt,callback:function(i){t.$set(t.formData,"bt",i)},expression:"formData.bt"}})],1),e("v-uni-view",{staticClass:"cu-form-group"},[e("v-uni-view",{staticClass:"title"},[t._v("题目类型")]),e("v-uni-radio-group",{on:{change:function(i){i=t.$handleEvent(i),t.radioChange(i)}}},t._l(t.items,function(i,n){return e("v-uni-label",{key:i.value,staticStyle:{display:"block","padding-top":"10upx"}},[e("v-uni-radio",{staticStyle:{"margin-right":"10upx"},attrs:{value:i.value,checked:i.value===t.formData.tplx}}),e("v-uni-view",{staticStyle:{display:"inline-block"}},[t._v(t._s(i.name))])],1)}))],1),e("v-uni-view",{directives:[{name:"show",rawName:"v-show",value:t.numShow,expression:"numShow"}],staticClass:"cu-form-group"},[e("v-uni-view",{staticClass:"title"},[t._v("选项数")]),e("v-uni-view",{staticClass:"num-flex"},[e("v-uni-view",{staticClass:"input-wrapper"},[e("v-uni-input",{attrs:{type:"number"},model:{value:t.formData.zxs,callback:function(i){t.$set(t.formData,"zxs",i)},expression:"formData.zxs"}})],1),e("v-uni-text",{staticClass:"num-text"},[t._v("-")]),e("v-uni-view",{staticClass:"input-wrapper"},[e("v-uni-input",{attrs:{type:"number"},model:{value:t.formData.zds,callback:function(i){t.$set(t.formData,"zds",i)},expression:"formData.zds"}})],1)],1)],1)],1),e("v-uni-view",{staticStyle:{"margin-top":"50upx"}},[e("v-uni-view",{staticClass:"cu-bar bg-white"},[e("v-uni-view",{staticClass:"action"},[e("v-uni-text",{staticClass:"cuIcon-titles text-blue"}),e("v-uni-text",{staticClass:"text-xl text-bold"},[t._v("选项信息")])],1)],1),t._l(t.newOptions,function(i,n){return e("v-uni-view",{key:n,staticClass:"cu-card shadow",staticStyle:{border:"1px solid #ededed","border-radius":"20upx",margin:"10upx 20upx",padding:"10upx 10upx 20upx"}},[e("v-uni-view",{staticClass:"cu-form-group"},[e("v-uni-view",{staticClass:"title"},[t._v("选项格式")]),e("v-uni-radio-group",{ref:"radio"+n,refInFor:!0,on:{change:function(i){i=t.$handleEvent(i),t.optionsRadioChange(n)}},model:{value:i.xxlx,callback:function(e){t.$set(i,"xxlx",e)},expression:"option.xxlx"}},t._l(t.optionsRadios,function(n,a){return e("v-uni-label",{key:n.value,staticStyle:{display:"block","padding-top":"10upx"}},[e("v-uni-radio",{staticStyle:{"margin-right":"10upx"},attrs:{value:n.value,checked:i.xxlx===n.value}}),e("v-uni-view",{staticStyle:{display:"inline-block"}},[t._v(t._s(n.name))])],1)}))],1),e("v-uni-view",{directives:[{name:"show",rawName:"v-show",value:"1"==i.xxlx||"3"==i.xxlx,expression:"option.xxlx=='1' || option.xxlx=='3'"}],staticClass:"cu-form-group"},[e("v-uni-view",{staticClass:"title"},[t._v("选项名称")]),e("v-uni-input",{attrs:{placeholder:"请填写选项名称",name:"input"},model:{value:i.xxmc,callback:function(e){t.$set(i,"xxmc",e)},expression:"option.xxmc"}})],1),e("v-uni-view",{directives:[{name:"show",rawName:"v-show",value:"2"==i.xxlx&&""!=i.xxmc,expression:"option.xxlx=='2' && option.xxmc != ''"}],staticClass:"cu-form-group"},[e("v-uni-view",{staticClass:"title"},[t._v("选项图片")]),e("v-uni-image",{staticStyle:{width:"300upx",height:"200upx"},attrs:{src:i.xxmc,mode:"aspectFit"}})],1),e("v-uni-view",{staticClass:"cu-form-group"},[e("v-uni-view",{staticClass:"title"},[t._v("选项描述")]),e("v-uni-textarea",{attrs:{maxlength:"-1",placeholder:"可不填"},model:{value:i.xxnr,callback:function(e){t.$set(i,"xxnr",e)},expression:"option.xxnr"}})],1),e("v-uni-view",{staticStyle:{display:"flex","justify-content":"flex-end"}},[e("v-uni-button",{directives:[{name:"show",rawName:"v-show",value:"2"==i.xxlx&&""==i.xxmc,expression:"option.xxlx=='2' && option.xxmc == ''"}],staticClass:"cu-btn bg-blue",staticStyle:{"margin-left":"30upx"},on:{click:function(i){i=t.$handleEvent(i),t.chooseImage(n)}}},[e("v-uni-image",{staticStyle:{width:"50upx",height:"50upx"},attrs:{src:"../../static/img/upload2.png",mode:""}})],1)],1)],1)}),e("v-uni-view",{staticClass:"padding"},[e("v-uni-view",{staticClass:"justify-center text-blue",staticStyle:{border:"1px dashed #ccc","border-radius":"10upx",height:"60upx",display:"flex","align-items":"center","font-size":"18px"},on:{click:function(i){i=t.$handleEvent(i),t.addOption(i)}}},[t._v("+")]),e("v-uni-view",{staticClass:"justify-center text-blue",staticStyle:{border:"1px dashed #ccc","border-radius":"10upx",height:"60upx",display:"flex","align-items":"center","font-size":"18px","margin-top":"20upx"},on:{click:function(i){i=t.$handleEvent(i),t.saveAll(i)}}},[t._v("save")])],1),e("v-uni-view",{staticClass:"cu-modal",class:t.modalShow2?"show":""},[e("v-uni-view",{staticClass:"cu-dialog"},[e("v-uni-view",{staticClass:"cu-bar bg-white justify-end"},[e("v-uni-view",{staticClass:"content"},[t._v("消息")]),e("v-uni-view",{staticClass:"action",on:{click:function(i){i=t.$handleEvent(i),t.modalHide2(i)}}},[e("v-uni-text",{staticClass:"cuIcon-close text-red"})],1)],1),e("v-uni-view",{staticClass:"padding-xl"},[t._v("是否需要设置其他选项？"),e("v-uni-switch",{on:{change:function(i){i=t.$handleEvent(i),t.switchChange(i)}}}),e("v-uni-view",{directives:[{name:"show",rawName:"v-show",value:t.errorShow,expression:"errorShow"}],staticStyle:{color:"red","line-height":"2"}},[t._v("请完成所有设置选项。")])],1),e("v-uni-view",{staticClass:"cu-bar bg-white justify-end"},[e("v-uni-view",{staticClass:"action"},[e("v-uni-button",{staticClass:"cu-btn line-blue text-blue",on:{click:function(i){i=t.$handleEvent(i),t.modalHide2(i)}}},[t._v("取消")]),e("v-uni-button",{staticClass:"cu-btn bg-blue margin-left",on:{click:function(i){i=t.$handleEvent(i),t.saveData(i)}}},[t._v("确定")])],1)],1)],1)],1)],2)],1)},a=[];e.d(i,"a",function(){return n}),e.d(i,"b",function(){return a})},ec76:function(t,i,e){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0;var n={data:function(){return{items:[{value:"1",name:"单选（只能选择一个）"},{value:"2",name:"多选（设置选择多个）"}],optionsRadios:[{value:"1",name:"文字",checked:"true"},{value:"2",name:"多媒体(图片、动画)"},{value:"3",name:"数字"}],newOptions:[],newOption:{xxlx:"1",xxmc:"",xxnr:""},formData:{tplx:"1",bt:"",hdid:null,zxs:"1",zds:"1",qt:0},numShow:!1,errorShow:!1,modalShow2:!1,loginFormShow:!1}},created:function(){console.log(this.$store.state.voteData.id)},onLoad:function(){this.getLogined()||(this.loginFormShow=!0)},methods:{switchChange:function(t){this.formData.qt=t.target.value?1:0},modalHide2:function(){this.errorShow=!1,this.modalShow2=!1},saveData:function(){var t=this;for(var i in this.formData.hdid=this.$store.state.voteData.id||11,this.formData)""!==this.formData[i]&&null!==this.formData[i]||(this.errorShow=!0);for(var e=this.newOptions.length;e>=0;e--)for(var n in this.newOptions[e])"xxnr"==n||""!==this.newOptions[e][n]&&null!==this.newOptions[e][n]||(this.errorShow=!0);this.errorShow||(this.formData.list=JSON.stringify(this.newOptions),this.$api.post("/voting/addOneVoting",this.formData).then(function(i){console.log(i),t.modalHide2(),200==i.resCode?(uni.showToast({title:"保存成功！",icon:"none"}),uni.navigateBack()):100==i.resCode&&(t.loginFormShow=!0)}))},saveAll:function(){this.modalShow2=!0},chooseImage:function(t){var i=this;uni.chooseImage({count:1,sizeType:["original","compressed"],sourceType:["album"],success:function(e){var n=e.tempFilePaths;n.length&&uni.uploadFile({url:i.$url+"/files/uploadOne",filePath:n[0],name:"file",success:function(e){console.log(e.data);var n=JSON.parse(e.data);i.newOptions[t].xxmc=i.$url+"/files/"+n.data}})},fail:function(){uni.showToast({title:"未选择到图片",icon:"none"})}})},addOption:function(){var t=[{xxlx:"1",xxmc:"",xxnr:""}];this.newOptions.concat(t);this.newOptions=this.newOptions.concat(t)},optionsRadioChange:function(t){var i=this,e="radio"+t,n=this.$refs[e][0].radioList.length&&this.$refs[e][0].radioList;n.forEach(function(e){e.radioChecked&&(i.newOptions[t].xxlx=e.radioValue,i.newOptions[t].xxmc="",i.newOptions[t].xxnr="")})},radioChange:function(t){this.formData.tplx=t.target.value,2==t.target.value?this.numShow=!0:(this.numShow=!1,this.formData.zxs="1",this.formData.zds="1")}}};i.default=n}}]);